<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Descripción de la compatibilidad con SSL</title><meta name="Language" content="es-es" /><meta name="System.Keywords" content="cifrado" /><meta name="System.Keywords" content="SSL" /><meta name="Microsoft.Help.Id" content="073f3b9e-8edd-4815-88ea-de0655d0325e" /><meta name="Description" content="Al conectarse a SQL Server, si la aplicación solicita cifrado y la instancia de SQL Server está configurada para admitir el cifrado SSL, el Controlador Microsoft JDBC para SQL Server iniciará el protocolo de enlace SSL." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Descripción de la compatibilidad con SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Al conectarse a SQL Server, si la aplicación solicita cifrado y la instancia de SQL Server está configurada para admitir el cifrado SSL, el Controlador Microsoft JDBC para SQL Server iniciará el protocolo de enlace SSL. El protocolo de enlace permite al servidor y al cliente negociar los algoritmos criptográficos y de cifrado que se usarán para proteger los datos. Después de completar el protocolo de enlace SSL, el cliente y el servidor pueden enviar los datos cifrados de forma segura. Durante el protocolo de enlace SSL, el servidor envía su certificado de clave pública al cliente. El emisor de un certificado de clave pública se conoce como entidad de certificación (CA, Certificate Authority). El cliente es responsable de validar que la entidad de certificación sea una en la que el cliente confíe.</p><p>Si la aplicación no solicita cifrado, el Controlador Microsoft JDBC para SQL Server no exigirá que SQL Server admita el cifrado SSL. Si la instancia de SQL Server no está configurada para exigir el cifrado SSL, se establecerá una conexión sin cifrado. Si la instancia de SQL Server se configura para exigir el cifrado SSL, el controlador habilitará automáticamente el cifrado SSL cuando se ejecute en una máquina virtual Java (JVM) que se haya configurado correctamente; de lo contrario, se finalizará la conexión y el controlador generará un error.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Asegúrese de que el valor pasado a <span sdata="langKeyword" value="serverName"><span class="keyword">serverName</span></span> coincide exactamente con el Nombre común (CN) o con el nombre DNS del Nombre alternativo de sujeto (SAN) del certificado de servidor para que una conexión SSL se establezca correctamente.</p></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Para obtener más información acerca de cómo configurar SSL para SQL Server, vea el tema Cifrar conexiones a SQL Server en los Libros en pantalla de SQL Server.</p></div></div><h1 class="heading">Notas</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Con el fin de permitir que las aplicaciones usen el cifrado SSL, el Controlador Microsoft JDBC para SQL Server incorpora las siguientes propiedades de conexión a partir de la versión 1.2: <span class="label">encrypt</span>, <span class="label">trustServerCertificate</span>, <span class="label">trustStore</span>, <span class="label">trustStorePassword</span> y <span class="label">hostNameInCertificate</span>. Para obtener más información, vea <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">Establecer las propiedades de conexión</a></span>.</p><p>En la tabla siguiente se resume cómo se comporta la versión del Controlador Microsoft JDBC para SQL Server en los posibles escenarios de conexiones SSL. Cada escenario usa un conjunto diferente de propiedades de conexión SSL. La tabla incluye: </p><ul><li><p><span sdata="langKeyword" value="blank"><span class="keyword">blank</span></span>: "La propiedad no existe en la cadena de conexión"</p></li><li><p><span sdata="langKeyword" value="value"><span class="keyword">value</span></span>: "La propiedad existe en la cadena de conexión y su valor es válido"</p></li><li><p><span sdata="langKeyword" value="any"><span class="keyword">any</span></span>: "No importa si la propiedad existe en la cadena de conexión o si su valor es válido"</p></li></ul><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>El mismo comportamiento se aplica para la autenticación de usuario de SQL Server y la autenticación integrada de Windows.</p></div><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>encrypt</p></th><th><p>trustServerCertificate</p></th><th><p>hostNameInCertificate</p></th><th><p>trustStore</p></th><th><p>trustStorePassword</p></th><th><p>Comportamiento</p></th></tr><tr><td><p>false o en blanco</p></td><td><p>cualquiera</p></td><td><p>cualquiera</p></td><td><p>cualquiera</p></td><td><p>cualquiera</p></td><td><p>El Controlador Microsoft JDBC para SQL Server no obligará a que SQL Server admita el cifrado SSL. Si el servidor tiene un certificado autofirmado, el controlador inicia el intercambio del certificado SSL. El certificado SSL no será validado y solo se cifran las credenciales (en el paquete de inicio de sesión).</p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL, el controlador iniciará el intercambio de certificados SSL. El certificado SSL no será validado, pero se cifrará toda la comunicación.</p></td></tr><tr><td><p>true</p></td><td><p>true</p></td><td><p>cualquiera</p></td><td><p>cualquiera</p></td><td><p>cualquiera</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. Observe que si la propiedad <span class="label">trustServerCertificate</span> se establece en "true", el controlador no validará el certificado SSL.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>en blanco</p></td><td><p>en blanco</p></td><td><p>en blanco</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará la propiedad <span class="label">serverName</span> especificada en la dirección URL de conexión para validar el certificado SSL de servidor y confiar en las reglas de búsqueda en la fábrica del administrador de confianzas con el fin de determinar qué almacén de certificados usar.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>value</p></td><td><p>en blanco</p></td><td><p>en blanco</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador validará el valor del asunto del certificado SSL con el valor especificado para la propiedad <span class="label">hostNameInCertificate</span>.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>en blanco</p></td><td><p>value</p></td><td><p>value</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStore</span> para buscar el archivo trustStore del certificado y el valor de la propiedad <span class="label">trustStorePassword</span> para comprobar la integridad del archivo trustStore.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>en blanco</p></td><td><p>en blanco</p></td><td><p>value</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server.</p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStorePassword</span> para comprobar la integridad del archivo trustStore predeterminado.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>en blanco</p></td><td><p>value</p></td><td><p>en blanco</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStore</span> para buscar la ubicación del archivo trustStore.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>value</p></td><td><p>en blanco</p></td><td><p>value</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStorePassword</span> para comprobar la integridad del archivo trustStore predeterminado. Además, el controlador usará el valor de la propiedad <span class="label">hostNameInCertificate</span> para validar el certificado SSL.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>value</p></td><td><p>value</p></td><td><p>en blanco</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStore</span> para buscar la ubicación del archivo trustStore. Además, el controlador usará el valor de la propiedad <span class="label">hostNameInCertificate</span> para validar el certificado SSL.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr><tr><td><p>true</p></td><td><p>false o en blanco</p></td><td><p>value</p></td><td><p>value</p></td><td><p>value</p></td><td><p>El Controlador Microsoft JDBC para SQL Server solicita usar el cifrado SSL con SQL Server. </p><p>Si el servidor requiere que el cliente sea compatible con el cifrado SSL o si admite el cifrado, el controlador iniciará el intercambio de certificados SSL. </p><p>El controlador usará el valor de la propiedad <span class="label">trustStore</span> para buscar el archivo trustStore del certificado y el valor de la propiedad <span class="label">trustStorePassword</span> para comprobar la integridad del archivo trustStore. Además, el controlador usará el valor de la propiedad <span class="label">hostNameInCertificate</span> para validar el certificado SSL.</p><p>Si el servidor no está configurado para ser compatible con el cifrado SSL, el controlador generará un error y terminará la conexión.</p></td></tr></table></div><p>Si la propiedad encrypt se establece en <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>, el Controlador Microsoft JDBC para SQL Server usa el proveedor de seguridad JSSE predeterminado de JVM para negociar el cifrado SSL con SQL Server. El proveedor de seguridad predeterminado puede no admitir todas las características necesarias para negociar el cifrado SSL correctamente. Por ejemplo, es posible que el proveedor de seguridad predeterminado no pueda admitir el tamaño de la clave pública RSA que se usa en el certificado SSL de SQL Server. En este caso, el proveedor de seguridad predeterminado podría generar un error que ocasionará que el controlador JDBC termine la conexión. Para resolver este problema, intente una de las siguientes acciones:</p><ul><li><p>Configurar SQL Server con un certificado de servidor que tenga una clave pública RSA más pequeña</p></li><li><p>Configurar la JVM para usar un proveedor de seguridad JSSE diferente en el archivo de propiedades de seguridad "&lt;inicio-java&gt;/lib/security/java.security"</p></li><li><p>Usar una JVM distinta</p></li></ul></div><h1 class="heading">Validar un certificado SSL de servidor</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>Durante el protocolo de enlace SSL, el servidor envía su certificado de clave pública al cliente. El controlador JDBC o el cliente tienen que validar que una entidad de certificación en la que el cliente confíe emita el certificado de servidor. El controlador requiere que el certificado de servidor cumpla las condiciones siguientes:</p><ul><li><p>Una entidad de certificación de confianza emita el certificado.</p></li><li><p>El certificado debe estar destinado a la autenticación del servidor.</p></li><li><p>El certificado no ha expirado.</p></li><li><p>El Nombre común (CN) del Asunto o un nombre DNS del Nombre alternativo de sujeto (SAN) del certificado coincide exactamente con el valor <span sdata="langKeyword" value="serverName"><span class="keyword">serverName</span></span> especificado en la cadena de conexión o, si se especifica, con el valor de la propiedad <span sdata="langKeyword" value="hostNameInCertificate"><span class="keyword">hostNameInCertificate</span></span>.</p></li><li><p>Un nombre DNS puede incluir caracteres comodín. Sin embargo, el Controlador Microsoft JDBC para SQL Server no admite coincidencia de caracteres comodín. Es decir, abc.com no coincidirá con *.com, pero *.com sí coincidirá con *.com.</p></li></ul></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Usar el cifrado SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Proteger las aplicaciones del controlador JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>