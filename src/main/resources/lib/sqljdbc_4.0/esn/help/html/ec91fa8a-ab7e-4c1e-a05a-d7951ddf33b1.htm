<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Conectar con el cifrado SSL</title><meta name="Language" content="es-es" /><meta name="System.Keywords" content="cifrado" /><meta name="System.Keywords" content="SSL" /><meta name="Microsoft.Help.Id" content="ec91fa8a-ab7e-4c1e-a05a-d7951ddf33b1" /><meta name="Description" content="Los ejemplos en este tema describen cómo utilizar propiedades de cadena de conexión que permiten a las aplicaciones utilizar el cifrado de Capa de sockets seguros (SSL) en una aplicación Java." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Conectar con el cifrado SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Los ejemplos en este tema describen cómo utilizar propiedades de cadena de conexión que permiten a las aplicaciones utilizar el cifrado de Capa de sockets seguros (SSL) en una aplicación Java. Para obtener más información sobre estas nuevas propiedades de cadena de conexión, como son <span class="label">encrypt</span>, <span class="label">trustServerCertificate</span>, <span class="label">trustStore</span>, <span class="label">trustStorePassword</span> y <span class="label">hostNameInCertificate</span>, vea <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">Establecer las propiedades de conexión</a></span>.</p><p>Cuando la propiedad <span class="label">encrypt</span> se establece en <span sdata="langKeyword" value="true"><span class="keyword">true</span></span> y la propiedad <span class="label">trustServerCertificate</span> se establece en <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>, el Controlador Microsoft JDBC para SQL Server no validará el certificado SSL de SQL Server. Esto suele ser necesario para permitir conexiones en entornos de prueba, por ejemplo cuando la instancia de SQL Server solo tiene un certificado autofirmado.</p><p>El ejemplo de código siguiente demuestra cómo establecer la propiedad <span class="label">trustServerCertificate</span> en una cadena de conexión:</p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true;trustServerCertificate=true";</pre></span></div><p>Cuando la propiedad <span class="label">encrypt</span> se establece en <span sdata="langKeyword" value="true"><span class="keyword">true</span></span> y la propiedad <span class="label">trustServerCertificate</span> se establece en <span sdata="langKeyword" value="false"><span class="keyword">false</span></span>, el Controlador Microsoft JDBC para SQL Server validará el certificado SSL de SQL Server. Validar el certificado de servidor es una parte del protocolo de enlace de SSL y asegurarse de que el servidor es el apropiado al que hay que conectarse. Para validar el certificado de servidor, se debe suministrar material de confianza en el momento de la conexión utilizando explícitamente las propiedades de conexión <span class="label">trustStore</span> y <span class="label">trustStorePassword</span>, o el almacén de confianza predeterminado de la máquina virtual Java (JVM) subyacente de forma implícita. </p><p>La propiedad <span class="label">trustStore</span> especifica la ruta de acceso (incluido el nombre de archivo) del archivo trustStore de certificado, que contiene la lista de certificados en los que el cliente confía. La propiedad <span class="label">trustStorePassword</span> especifica la contraseña que se usa para comprobar la integridad de los datos de trustStore. Para obtener más información sobre cómo utilizar el almacén de confianza predeterminado de la JVM, vea <span sdata="link"><a href="ae34cd1f-3569-4759-80c7-7c9b33b3e9eb.htm">Configurar el cliente para el cifrado SSL</a></span>.</p><p>El ejemplo de código siguiente muestra cómo establecer las propiedades <span class="label">trustStore</span> y <span class="label">trustStorePassword</span> en una cadena de conexión: </p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true; trustServerCertificate=false;" +
     "trustStore=storeName;trustStorePassword=storePassword";</pre></span></div><p>El controlador JDBC proporciona una propiedad adicional, <span class="label">hostNameInCertificate</span>, que especifica el nombre de host del servidor. El valor de esta propiedad debe coincidir con la propiedad de asunto del certificado. </p><p>El ejemplo de código siguiente muestra cómo utilizar la propiedad <span class="label">hostNameInCertificate</span> en una cadena de conexión:</p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true; trustServerCertificate=false;" +
     "trustStore=storeName;trustStorePassword=storePassword" +
     "hostNameInCertificate=hostName";</pre></span></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>También puede establecer el valor de las propiedades de conexión mediante los métodos <span sdata="langKeyword" value="setter"><span class="keyword">setter</span></span> adecuados que proporciona la clase <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>.</p></div><p>Si la propiedad <span class="label">encrypt</span> se establece en <span sdata="langKeyword" value="true"><span class="keyword">true</span></span> y la propiedad <span class="label">trustServerCertificate</span> se establece en <span sdata="langKeyword" value="false"><span class="keyword">false</span></span> y si el nombre de servidor de la cadena de conexión no coincide con el nombre de servidor del certificado SSL de SQL Server, se generará el siguiente error: El controlador no pudo establecer una conexión segura con SQL Server con el cifrado de Capa de sockets seguros (SSL). Error: "java.security.cert.CertificateException: No se pudo validar el nombre del servidor en un certificado durante la inicialización de SSL (Capa de sockets seguros)."</p></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Usar el cifrado SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Proteger las aplicaciones del controlador JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>