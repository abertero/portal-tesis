<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Configurar el cliente para el cifrado SSL</title><meta name="Language" content="es-es" /><meta name="System.Keywords" content="certificado" /><meta name="System.Keywords" content="configurar el certificado SSL" /><meta name="System.Keywords" content="SSL" /><meta name="System.Keywords" content="certificado SSL" /><meta name="Microsoft.Help.Id" content="ae34cd1f-3569-4759-80c7-7c9b33b3e9eb" /><meta name="Description" content="El Controlador Microsoft JDBC para SQL Server o el cliente tiene que validar que el servidor es el correcto y que una entidad de certificación en la que el cliente confía ha emitido su certificado." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Configurar el cliente para el cifrado SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>El Controlador Microsoft JDBC para SQL Server o el cliente tiene que validar que el servidor es el correcto y que una entidad de certificación en la que el cliente confía ha emitido su certificado. Para validar el certificado de servidor, se debe proporcionar material de confianza en el momento de la conexión. Además, el emisor del certificado de servidor debe ser una entidad de certificación en la que el cliente confíe.</p><p>En este tema se describe primero cómo proporcionar el material de confianza en el equipo cliente. A continuación se describe cómo importar un certificado de servidor al almacén de confianza del equipo cliente cuando una entidad de certificación privada emita la instancia del certificado de Capa de sockets seguros (SSL) de SQL Server.</p><p>Para obtener más información sobre cómo validar el certificado de servidor, vea la sección que trata de la validación de certificados SSL de servidor en <span sdata="link"><a href="073f3b9e-8edd-4815-88ea-de0655d0325e.htm">Descripción de la compatibilidad con SSL</a></span>.</p></div><h1 class="heading">Configurar el almacén de confianza de cliente</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>La validación del certificado de servidor requiere que se suministre material de confianza en el momento de la conexión utilizando explícitamente las propiedades de conexión <span class="label">trustStore</span> y <span class="label">trustStorePassword</span>, o el almacén de confianza predeterminado de la máquina virtual Java (JVM) subyacente de forma implícita. Para obtener más información sobre cómo establecer las propiedades <span class="label">trustStore</span> y <span class="label">trustStorePassword</span> en una cadena de conexión, vea <span sdata="link"><a href="ec91fa8a-ab7e-4c1e-a05a-d7951ddf33b1.htm">Conectar con el cifrado SSL</a></span>.</p><p>Si la propiedad <span class="label">trustStore</span> no se ha especificado o se ha establecido en null, el Controlador Microsoft JDBC para SQL Server se basará en el proveedor de seguridad subyacente de JVM, la Extensión de sockets seguros de Java (SunJSSE, Java Secure Socket Extension). El proveedor de SunJSSE proporciona un <b>TrustManager</b> predeterminado, que se utiliza para validar los certificados X.509 que devuelve SQL Server con el material de confianza que se proporciona en un almacén de confianza.</p><p><b>TrustManager</b> intenta encontrar el trustStore predeterminado con el orden de búsqueda siguiente:</p><ul><li><p>Si la propiedad del sistema "javax.net.ssl.trustStore" está definida, <b>TrustManager</b> intenta buscar el archivo trustStore predeterminado con el nombre de archivo que especifica dicha propiedad del sistema.</p></li><li><p>Si la propiedad del sistema "javax.net.ssl.trustStore" no se especificó, y si el archivo "&lt;java-home&gt;/lib/security/jssecacerts" existe, se utiliza ese archivo. </p></li><li><p>Si el archivo "&lt;java-home&gt;/lib/security/cacerts" existe, se utiliza ese archivo.</p></li></ul><p>Para obtener más información, consulte la documentación de la interfaz de SUNX509 TrustManager en el sitio web de Sun Microsystems.</p><p>El entorno de tiempo de ejecución de Java le permite establecer las propiedades del sistema trustStore y trustStorePassword como sigue: </p><div class="sampleCode"><span codeLanguage="other"><pre>java -Djavax.net.ssl.trustStore=C:\MyCertificates\storeName
java -Djavax.net.ssl.trustStorePassword=storePassword</pre></span></div><p>En este caso, cualquier aplicación que se ejecute en esta JVM utilizará estos valores como predeterminados. Para invalidar la configuración predeterminada de la aplicación, debería establecer las propiedades de conexión <span class="label">trustStore</span> y <span class="label">trustStorePassword</span> en la cadena de conexión o en el método de establecimiento adecuado de la clase <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>.</p><p>Además, puede configurar y administrar los archivos de almacenes de confianza como "&lt;java-home&gt;/lib/security/jssecacerts" y "&lt;java-home&gt;/lib/security/cacerts". Para ello, utilice la utilidad JAVA "keytool" que se instala con el Entorno de tiempo de ejecución de Java (JRE, Java Runtime Environment). Para obtener más información sobre la utilidad "keytool", consulte la documentación de keytool en el sitio web de Sun Microsystems.</p><h1 class="heading">Importar el certificado de servidor al almacén de confianza</h1><div class="subsection"><p>Durante el protocolo de enlace SSL, el servidor envía su certificado de clave pública al cliente. El emisor de un certificado de clave pública se conoce como entidad de certificación (CA, Certificate Authority). El cliente tiene que asegurarse de que la entidad de certificación es una de aquellas en las que el cliente confía. Para ello, hay que saber de antemano la clave pública de las CA de confianza. Normalmente, la JVM incluye un conjunto predefinido de entidades de certificación de confianza. </p><p>Si una entidad de certificación privada emite la instancia del certificado SSL de SQL Server, debe agregar el certificado de la entidad de certificación a la lista de certificados de confianza en el almacén de confianza del equipo cliente.</p><p>Para ello, use la utilidad JAVA "keytool" que se instala con JRE. El símbolo del sistema siguiente muestra cómo utilizar la utilidad "keytool" para importar un certificado de un archivo:</p><div class="sampleCode"><span codeLanguage="other"><pre>keytool -import -v -trustcacerts -alias myServer -file caCert.cer -keystore truststore.ks</pre></span></div><p>El ejemplo utiliza un archivo denominado "caCert.cer" como archivo de certificado. Debe obtener este archivo de certificado del servidor. Los pasos siguientes explican cómo exportar el certificado de servidor a un archivo:</p><ol><li><p>Haga clic en Inicio y, a continuación, en Ejecutar, y escriba MMC. (MMC es un acrónimo de Microsoft Management Console).</p></li><li><p>En MMC, abra Certificados. </p></li><li><p>Expanda Personal y Certificados. </p></li><li><p>Haga clic con el botón secundario del mouse en el certificado de servidor y, a continuación, seleccione Todas las tareas\Exportar. </p></li><li><p>Haga clic en Siguiente para pasar del cuadro de diálogo de bienvenida del Asistente para exportación de certificados. </p></li><li><p>Confirme que está seleccionada la opción "No, no exporte la clave privada" y, a continuación, haga clic en Siguiente. </p></li><li><p>Asegurarse de que están seleccionadas las opciones DER binario codificado X.509 (.CER) o X.509 codificado base-64 (.CER), y a continuación haga clic en Siguiente. </p></li><li><p>Escriba un nombre para el archivo de exportación.</p></li><li><p>Haga clic en Siguiente y, a continuación, haga clic en Finalizar para exportar el certificado.</p></li></ol></div></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Usar el cifrado SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Proteger las aplicaciones del controlador JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>