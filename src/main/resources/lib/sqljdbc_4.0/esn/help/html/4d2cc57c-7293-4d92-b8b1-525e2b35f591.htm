<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Programar con SQLXML</title><meta name="Language" content="es-es" /><meta name="System.Keywords" content="almacenamiento en búfer adaptable" /><meta name="System.Keywords" content="programar con sqlxml" /><meta name="System.Keywords" content="sqlxml" /><meta name="System.Keywords" content="xml" /><meta name="Microsoft.Help.Id" content="4d2cc57c-7293-4d92-b8b1-525e2b35f591" /><meta name="Description" content="En esta sección se describe cómo usar los métodos de la API del Controlador Microsoft JDBC para SQL Server para almacenar y recuperar un documento XML en y desde una base de datos relacional con objetos SQLXML." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Programar con SQLXML</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>En esta sección se describe cómo usar los métodos de la API del Controlador Microsoft JDBC para SQL Server para almacenar y recuperar un documento XML en y desde una base de datos relacional con objetos <span sdata="langKeyword" value="SQLXML"><span class="keyword">SQLXML</span></span>. </p><p>Esta sección también contiene información acerca de los tipos de objetos SQLXML y proporciona una lista de las instrucciones y las limitaciones importantes cuando se usan objetos SQLXML.</p></div><h1 class="heading">Leer y escribir datos XML con objetos SQLXML</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>En la lista siguiente se describe cómo usar los métodos de la API del Controlador Microsoft JDBC para SQL Server para leer y escribir datos XML con objetos SQLXML:</p><ul><li><p>Para crear un objeto SQLXML, use el método <a href="cf5bfcdd-bc03-4c5b-b554-d8a8a4067e93.htm">createSQLXML</a> de la clase <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>. Tenga en cuenta que este método crea un objeto SQLXML sin dato alguno. Para agregar datos <span sdata="langKeyword" value="xml"><span class="keyword">xml</span></span> al objeto SQLXML, llame a uno de los métodos siguientes especificados en la interfaz SQLXML: <b>setResult</b>, <b>setCharacterStream</b>, <b>setBinaryStream</b> o <b>setString</b>.</p></li><li><p>Para recuperar el propio objeto SQLXML, use los métodos <b>getSQLXML</b> de la clase <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a> o de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a>. </p></li><li><p>Para recuperar datos <span sdata="langKeyword" value="xml"><span class="keyword">xml</span></span> desde un objeto SQLXML, use uno de los métodos siguientes especificados en la interfaz SQLXML: <b>getSource</b>, <b>getCharacterStream</b>, <b>getBinaryStream</b> o <b>getString</b>. </p></li><li><p>Para actualizar los datos <span sdata="langKeyword" value="xml"><span class="keyword">xml</span></span> de un objeto SQLXML, use el método <a href="abe8ff37-72e5-4ec1-a226-6b68dbf2c1b4.htm">updateSQLXML</a> de la clase <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a>.</p></li><li><p>Para almacenar un objeto SQLXML en una columna de tabla del tipo <span sdata="langKeyword" value="xml"><span class="keyword">xml</span></span>, use los métodos <b>setSQLXML</b> de la clase <a href="a8481c06-fbba-432b-8c69-4f4619c20ad4.htm">SQLServerPreparedStatement</a> o de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a>.</p></li></ul><p>El código muestra de <a href="8f2ff25b-71fd-46d7-b6de-d656095d2aad.htm">Ejemplo de tipo de datos SQLXML</a> muestra cómo realizar estas tareas API comunes. </p></div><h1 class="heading">Objetos SQLXML de lectura y escritura</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>La tabla siguiente enumera qué tipos de objetos SQLXML son compatibles con los métodos establecedor, captador y actualizador de la API de JDBC.  Las columnas de la tabla hacen referencia a lo siguiente: </p><ul><li><p>La columna <b>Nombre de método</b> enumera los métodos compatibles establecedor, captador y actualizador de la API de JDBC.</p></li><li><p>La columna <b>Objeto SQLXML de captador</b> representa un objeto SQLXML que es creado bien por el método <a href="8bcf9eda-b36c-480c-8bf2-91c392d5a0ee.htm">getSQLXML</a> de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a> o bien por el método <a href="a07e0f30-cbc6-4ad7-b931-c30cad382e64.htm">getSQLXML</a> de la clase <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a>.</p></li><li><p>La columna <b>Objeto SQLXML establecedor</b> representa un objeto SQLXML que es creado por el método <a href="cf5bfcdd-bc03-4c5b-b554-d8a8a4067e93.htm">createSQLXML</a> de la clase <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>. Tenga en cuenta que los métodos establecedor que se indican abajo solamente aceptan un objeto SQLXML creado por el método <a href="cf5bfcdd-bc03-4c5b-b554-d8a8a4067e93.htm">createSQLXML</a>.</p></li></ul><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Nombre de método </p></th><th><p>Objeto SQLXML de captador</p><p>(lectura)</p></th><th><p>Objeto SQLXML establecedor</p><p>(escritura)</p></th></tr><tr><td><p><b>CallableStatement.setSQLXML()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>CallableStatement.setObject()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>PreparedStatement.setSQLXML()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>PreparedStatement.setObject()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>ResultSet.updateSQLXML()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>ResultSet.updateObject()</b></p></td><td><p>No compatible</p></td><td><p>Compatible</p></td></tr><tr><td><p><b>ResultSet.getSQLXML()</b></p></td><td><p>Compatible</p></td><td><p>No compatible</p></td></tr><tr><td><p><b>CallableStatement.getSQLXML()</b></p></td><td><p>Compatible</p></td><td><p>No compatible</p></td></tr></table></div><p>Tal como se muestra en el área superior, los métodos SQLXML establecedor no funcionarán con los objetos SQLXML de lectura; similarmente, los métodos captadores no funcionarán con los objetos SQLXML de escritura.</p><p>Si la aplicación invoca el método <b>setObject</b> especificando un parámetro de escala o de longitud con un objeto SQLXML, se ignora el parámetro de escala o de longitud.</p></div><h1 class="heading">Instrucciones y limitaciones cuando se usan objetos SQLXML</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p>Las aplicaciones pueden usar objetos SQLXML para leer datos XML de la base de datos y para escribirlos en ella. La lista siguiente proporciona información relativa a las instrucciones y limitaciones específicas durante el uso de objetos SQLXML. </p><ul><li><p>Un objeto SQLXML solamente puede ser válido durante la transacción en la que se creó.</p></li><li><p>Un objeto SQLXML recibido de un método de captador solamente se puede usar para leer datos. </p></li><li><p>Un objeto SQLXML creado por el objeto de conexión solamente se puede usar para escribir datos.</p></li><li><p>La aplicación solamente puede invocar un método de captador en un objeto SQLXML de lectura para leer datos. Después de invocarse el método de captador, todos los demás métodos captador o establecedor del mismo objeto SQLXML dan error. </p></li><li><p>La aplicación solamente puede invocar el método <b>free</b> en el objeto SQLXML después de que se ha leído o escrito. Sin embargo, sigue siendo posible procesar el flujo o el origen devueltos mientras la columna o el parámetro subyacentes estén activos. Si la columna o el parámetro subyacentes están inactivos, el flujo o el origen asociados con el objeto SQLXML se cerrarán. Si la columna o el parámetro subyacentes ya no son válidos, los datos subyacentes ya no estarán disponibles para los métodos captadores de Stream, Simple API for XML (SAX) y de Streaming API for XML (StAX).</p></li><li><p>La aplicación solamente puede invocar un método establecedor en un objeto SQLXML de escritura. Después de invocarse el método establecedor, todos los demás métodos establecedor o captador del mismo objeto SQLXML dan error.</p></li><li><p>Para establecer datos en el objeto SQLXML, la aplicación debe usar las funciones y el método establecedor apropiados en el objeto devuelto.</p></li><li><p>Los métodos <b>getSQLXML</b> de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a> y de la clase <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a> devuelven datos <span sdata="langKeyword" value="null"><span class="keyword">null</span></span> si la columna subyacente es <span sdata="langKeyword" value="null"><span class="keyword">null</span></span>.</p></li><li><p>Los objetos establecedor pueden ser válidos durante la conexión en la que son creados.</p></li><li><p>A las aplicaciones no se les permite establecer un valor <span sdata="langKeyword" value="null"><span class="keyword">null</span></span> utilizando los métodos establecedor proporcionados por la interfaz de SQLXML. Las aplicaciones pueden establecer un valor vacío ("") utilizando los métodos establecedor proporcionados por la interfaz de SQLXML. Para establecer un valor <span sdata="langKeyword" value="null"><span class="keyword">null</span></span>, las aplicaciones deberían llamar a uno de los elementos siguientes:</p><ul><li><p>Los métodos <b>setNull</b> de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a> y de la clase <a href="a8481c06-fbba-432b-8c69-4f4619c20ad4.htm">SQLServerPreparedStatement</a>.</p></li><li><p>Los métodos <b>setObject</b> de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a> y de la clase <a href="a8481c06-fbba-432b-8c69-4f4619c20ad4.htm">SQLServerPreparedStatement</a>. </p></li><li><p>Los métodos <b>setSQLXML</b> de la clase <a href="30710a63-c05d-47d9-9cf9-c087a1c76373.htm">SQLServerCallableStatement</a> y de la clase <a href="a8481c06-fbba-432b-8c69-4f4619c20ad4.htm">SQLServerPreparedStatement</a> con un valor de parámetro <span sdata="langKeyword" value="null"><span class="keyword">null</span></span>.</p></li></ul></li><li><p>Al trabajar con documentos XML, recomendamos usar los analizadores Simple API for XML (SAX) y Streaming API for XML (StAX) en lugar de los analizadores de Document Object Model (DOM) por motivos de rendimiento.</p></li></ul><p>Los analizadores XML no pueden controlar valores vacíos. Sin embargo, SQL Server permite que las aplicaciones recuperen valores vacíos de columnas de base de datos del tipo de datos XML y los almacenen en ellas. Eso significa que al analizar los datos XML, si el valor subyacente está vacío, el analizador devuelve una excepción. En los resultados de DOM, el controlador JDBC capta esa excepción y devuelve un error. En los resultados de SAX y Stax, el error procede directamente del analizador.</p></div><h1 class="heading">Almacenamiento en búfer adaptable y compatibilidad con SQLXML</h1><div id="sectionSection3" class="section" name="collapseableSection" style=""><p>Los flujos binarios y de caracteres devueltos por el objeto SQLXML obedecen a los modos de almacenamiento en búfer completo o adaptable. Por otra parte, si los analizadores XML no son secuencia, no obedecerán a los valores completos o adaptables. Para obtener más información acerca del almacenamiento en búfer adaptable, vea <span sdata="link"><a href="92d4e3be-c3e9-4732-9a60-b57f4d0f7cb7.htm">Usar el almacenamiento en búfer adaptable</a></span>.</p></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="32b7217e-1f0c-473d-9a45-176daa81584e.htm">Compatibilidad con datos XML</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>