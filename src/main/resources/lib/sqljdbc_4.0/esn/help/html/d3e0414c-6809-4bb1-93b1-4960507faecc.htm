<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Descripción de transacciones</title><meta name="Language" content="es-es" /><meta name="System.Keywords" content="transacciones" /><meta name="Microsoft.Help.Id" content="d3e0414c-6809-4bb1-93b1-4960507faecc" /><meta name="Description" content="Las transacciones son grupos de operaciones que se combinan en unidades lógicas de trabajo. Se usan para controlar y mantener la coherencia y la integridad de cada acción de una transacción, a pesar de los errores que puedan producirse en el sistema," /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Descripción de transacciones</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Las transacciones son grupos de operaciones que se combinan en unidades lógicas de trabajo. Se usan para controlar y mantener la coherencia y la integridad de cada acción de una transacción, a pesar de los errores que puedan producirse en el sistema, </p><p>Con el Controlador Microsoft JDBC para SQL Server, las transacciones pueden ser locales o distribuidas. Las transacciones también pueden usar niveles de aislamiento. Para obtener más información acerca de los niveles de aislamiento compatibles con el controlador JDBC, vea <span sdata="link"><a href="2c41e23a-da6c-4650-b5fc-b5fe53ba65c3.htm">Descripción de los niveles de aislamiento</a></span>.</p><p>LAs aplicaciones deben controlar las transacciones usando las instrucciones Transact-SQ o los métodos proporcionados por el controlador JDBC, pero no ambos. Usar en la misma transacción las instrucciones Transact-SQL y los métodos API de JDBC podría producir problemas, como que una transacción no pueda ser confirmada cuando se espera, que la transacción sea confirmada o se revierta y se inicie una nueva inesperadamente, o las excepciones "No se pudo reanudar la transacción".</p></div><h1 class="heading">Usar transacciones locales</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Se considera que una transacción es local cuando es de una sola fase y la base de datos la trata directamente. El controlador JDBC es compatible con las transacciones locales mediante el uso de varios métodos de la clase <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>, incluidos <a href="db1e22d2-e53f-474e-8c99-cb1fff7f491a.htm">setAutoCommit</a>, <a href="c7346165-51bf-4844-b64c-29833c147236.htm">commit</a> y <a href="7adb6772-4047-4d8e-931d-b3d20eec44b5.htm">rollback</a>. Las transacciones locales suelen ser administradas explícitamente por la aplicación o automáticamente por el servidor de aplicaciones de Java Platform, Enterprise Edition (Java EE).</p><p>El siguiente ejemplo realiza una transacción local que se compone de dos instrucciones separadas en el bloque<span class="code"> try </span>. Las instrucciones se ejecutan contra la tabla Production.ScrapReason en la base de datos de ejemplo AdventureWorks SQL Server 2005 y se confirman si no se lanza ninguna excepción. El código en el bloque <span class="code"> catch </span> revierte la transacción si se lanza una excepción.</p><div name="snippetGroup"><div class="sampleCode"><span codeLanguage="Java"><pre>public static void executeTransaction(Connection con) {
   try {
      //Switch to manual transaction mode by setting
      //autocommit to false. Note that this starts the first 
      //manual transaction.
      con.setAutoCommit(false);
      Statement stmt = con.createStatement();
      stmt.executeUpdate("INSERT INTO Production.ScrapReason(Name) VALUES('Wrong size')");
      stmt.executeUpdate("INSERT INTO Production.ScrapReason(Name) VALUES('Wrong color')");
      con.commit(); //This commits the transaction and starts a new one.
      stmt.close(); //This turns off the transaction.
      System.out.println("Transaction succeeded. Both records were written to the database.");
   }
   catch (SQLException ex) {
      ex.printStackTrace();
      try {
         System.out.println("Transaction failed.");
         con.rollback();
      }
      catch (SQLException se) {
         se.printStackTrace();
      }
   }
}

</pre></span></div></div></div><h1 class="heading">Usar transacciones distribuidas</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>Una transacción distribuida es una transacción que actualiza datos en dos o más bases de datos conectadas a una red manteniendo las propiedades atómicas, coherentes, aisladas y durables (ACID) del procesamiento de la transacción. La compatibilidad con las transacciones distribuidas se incluyó en la API de JDBC de la especificación API Opcional de JDBC 2.0. La administración de transacciones distribuidas normalmente se realiza de forma automática por parte del administrador de transacciones Servicio de Transacciones de Java (JTS) dentro de un entorno de servidor de aplicaciones Java EE. No obstante, el Controlador Microsoft JDBC para SQL Server admite las transacciones distribuidas realizadas en cualquier administrador de transacciones compatible con la API de transacciones de Java (JTA).</p><p>El controlador JDBC se integra a la perfección con Microsoft DTC (Coordinador de transacciones distribuidas) de Microsoft para proporcionar una compatibilidad verdadera con las transacciones distribuidas de SQL Server. MS DTC es una herramienta de transacciones distribuidas proporcionada por Microsoft para sistemas de Microsoft Windows. MS DTC usa tecnología probada de procesamiento de transacciones de Microsoft para proporcionar compatibilidad con características XA tales como el protocolo de confirmación distribuido de dos fases completo y la recuperación de transacciones distribuidas.</p><p>Para obtener más información sobre cómo utilizar las transacciones distribuidas, consulte <span sdata="link"><a href="574e326f-0520-4003-bdf1-62d92c3db457.htm">Descripción de las transacciones XA</a></span>.</p></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="afbb776f-05dc-4e79-bb25-2c340483e401.htm">Realizar transacciones con el controlador JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>