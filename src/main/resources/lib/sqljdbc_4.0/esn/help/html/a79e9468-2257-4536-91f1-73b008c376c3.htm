<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Tener acceso a información de diagnóstico en el registro de eventos extendidos</title><meta name="Language" content="es-es" /><meta name="Microsoft.Help.Id" content="a79e9468-2257-4536-91f1-73b008c376c3" /><meta name="Description" content="En Controlador Microsoft JDBC 4." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Tener acceso a información de diagnóstico en el registro de eventos extendidos</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>En Controlador Microsoft JDBC 4.0 para SQL Server, el seguimiento (<span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Hacer un seguimiento del funcionamiento del controlador</a></span>) se ha actualizado para facilitar la correlación de eventos de cliente con la información de diagnóstico, como los errores de conexión, a partir del búfer de anillo de conectividad del servidor y la información de rendimiento de aplicación en el registro de eventos extendidos. Para obtener información acerca de la lectura del registro de eventos extendidos, vea <a href="http://msdn.microsoft.com/en-us/library/hh710068(SQL.110).aspx ">Ver datos de sesión de evento</a>.</p></div><h1 class="heading">Detalles</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Para las operaciones de conexión, Controlador Microsoft JDBC para SQL Server enviará un identificador de conexión de cliente. Si se produce un error en la conexión, puede tener acceso al búfer de anillo de conectividad (<a href="http://go.microsoft.com/fwlink/?LinkId=207752">Solución de problemas de conectividad en SQL Server 2008 con el búfer de anillo de conectividad</a>) y buscar el campo <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> para obtener información de diagnóstico acerca del error de conexión. Los identificadores de conexión de cliente se registran en el búfer de anillo únicamente si se produce un error. (Si se produce un error en una conexión antes de enviar el paquete previo al inicio de sesión, no se generará un identificador de conexión de cliente). El identificador de conexión de cliente es un GUID de 16 bytes. También puede buscar el identificador de conexión de cliente en el resultado de destino de eventos extendidos si la acción <span sdata="langKeyword" value="client_connection_id"><span class="keyword">client_connection_id</span></span> se agrega a los eventos en una sesión de eventos extendidos. Si necesita más ayuda de diagnóstico del controlador cliente, puede habilitar el seguimiento, volver a ejecutar el ejecutar el comando de conexión y observar el campo <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> en el seguimiento.</p><p>Puede obtener el identificador de conexión de cliente mediante programa con <span sdata="link"><a href="031c01e2-2c65-4fe4-9700-fdbcc7a39f30.htm">Interfaz de ISQLServerConnection</a></span>. El identificador de conexión también estará presente en cualquier excepción relacionada con la conexión.</p><p>Cuando se produzca un error de conexión, el identificador de conexión de cliente en la información de seguimiento de BID del servidor y en el búfer de anillo de conectividad puede ayudar a correlacionar las conexiones de cliente con las conexiones en el servidor. Para obtener más información acerca de los seguimientos de BID en el servidor, vea <a href="http://go.microsoft.com/fwlink/?LinkId=125805">Seguimiento de acceso de datos</a>. Tenga en cuenta que el artículo de seguimiento de acceso de datos también incluye información acerca de la realización de un seguimiento de acceso de datos que no se aplica a Controlador Microsoft JDBC para SQL Server; vea <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Hacer un seguimiento del funcionamiento del controlador</a></span> para obtener información acerca de cómo realizar un seguimiento de acceso de datos mediante Controlador Microsoft JDBC para SQL Server.</p><p>El controlador JDBC también envía un identificador de actividad específico de subproceso. El identificador de actividad se captura en las sesiones de eventos extendidos si se han iniciado con la opción TRACK_CAUSAILITY habilitada. En el caso de problemas de rendimiento con una conexión activa, puede obtener el identificador de actividad del seguimiento del cliente (campo ActivityID) y, a continuación, buscar el identificador de actividad en la salida de eventos extendidos. El identificador de actividad en los eventos extendidos es un GUID de 16 bytes (no es el mismo GUID que el identificador de conexión de cliente) anexado con un número de secuencia de cuatro bytes. El número de secuencia representa el orden de una solicitud en un subproceso. El campo ActivityId se envía para las instrucciones por lotes SQL y las solicitudes RPC. Para habilitar el envío de ActivityId al servidor, primero debe especificar el siguiente par clave-valor en el archivo Logging.Properties:</p><div class="sampleCode"><span codeLanguage="other"><pre>com.microsoft.sqlserver.jdbc.traceactivity = on</pre></span></div><p>Para obtener más información, vea <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Hacer un seguimiento del funcionamiento del controlador</a></span>. Esta marca de seguimiento se utiliza con los registradores de objetos JDBC correspondientes para decidir si se realiza el seguimiento y enviar ActivityId en el controlador JDBC. Además de actualizar el archivo Logging.Properties, el registrador com.microsoft.sqlserver.jdbc debe estar habilitado en FINER o superior. Si desea enviar ActivityId al servidor para las solicitudes efectuadas por una determinada clase, se debe habilitar el registrador de clase correspondiente en FINER o FINEST. Por ejemplo, si la clase es SQLServerStatement, habilite el registrador com.microsoft.sqlserver.jdbc.SQLServerStatement.</p><p>A continuación, se ofrece un ejemplo que usa Transact-SQL para iniciar una sesión de eventos extendidos que se almacenará en un búfer de anillo y registrará el identificador de actividad enviado por un cliente en operaciones RPC y por lotes:</p><div class="sampleCode"><span codeLanguage="other"><pre>create event session MySession on server
add event connectivity_ring_buffer_recorded,
add event sql_statement_starting (action (client_connection_id)),
add event sql_statement_completed (action (client_connection_id)),
add event rpc_starting (action (client_connection_id)),
add event rpc_completed (action (client_connection_id))
add target ring_buffer with (track_causality=on)</pre></span></div></div><span id="seeAlsoSpan"><h1 class="heading">Vea también</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="723e2680-a0c5-4a7d-a319-1e49e41078cf.htm">Diagnosticar problemas del controlador JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Enviar <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dLe%20agradecemos%20sus%20comentarios.%20Los%20equipos%20de%20desarrolladores%20usan%20estos%20comentarios%20para%20mejorar%20la%20documentación.%20Mientras%20revisamos%20los%20comentarios,%20es%20posible%20que%20le%20enviemos%20un%20correo%20electrónico%20para%20solicitarle%20alguna%20aclaración%20o%20comentarios%20sobre%20una%20posible%20solución.%20No%20usamos%20su%20dirección%20de%20correo%20electrónico%20para%20ningún%20otro%20propósito%20y%20ésta%20se%20borra%20una%20vez%20finalizada%20la%20revisió.%0\APara%20obtener%20más%20información%20acerca%20de%20las%20directivas%20de%20privacidad%20de%20Microsoft,%20vea%20http://privacy.microsoft.com/es-es/default.aspx.%0\A%0\d','Comentarios%20del cliente');">comentarios de </a> acerca de este tema Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Todos los derechos reservados.</a></p></span></div></div></body></html>